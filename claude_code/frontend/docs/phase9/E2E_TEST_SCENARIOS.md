# E2E 테스트 시나리오

**문서 버전**: 1.0
**작성일**: 2025-10-23
**대상**: iOS/Android 에뮬레이터 및 실제 기기

---

## 📋 개요

이 문서는 HeartCheck 모바일 애플리케이션의 End-to-End (E2E) 수동 테스트 시나리오를 정의합니다. 각 시나리오는 실제 사용자 플로우를 기반으로 하며, iOS와 Android 플랫폼 모두에서 테스트되어야 합니다.

---

## 🎯 테스트 목표

1. **기능 검증**: 모든 주요 기능이 정상 작동하는지 확인
2. **사용자 경험**: 직관적이고 원활한 사용자 플로우 검증
3. **플랫폼 호환성**: iOS와 Android에서 일관된 동작 확인
4. **에러 처리**: 예외 상황에서 적절한 에러 메시지 표시 확인
5. **데이터 무결성**: 데이터가 정확하게 저장되고 불러와지는지 확인

---

## 📱 테스트 환경

### iOS
- **시뮬레이터**: iPhone 14 Pro (iOS 17.0+)
- **실제 기기**: iPhone 12 이상 (iOS 15.0+)

### Android
- **에뮬레이터**: Pixel 6 (Android 12.0+)
- **실제 기기**: Samsung Galaxy S21 이상 (Android 11.0+)

---

## 🧪 E2E 테스트 시나리오

### 시나리오 1: 신규 사용자 회원가입 플로우

**목적**: 신규 사용자가 앱을 설치하고 계정을 생성하는 전체 과정 검증

**전제 조건**:
- 앱이 설치되어 있음
- 이전 테스트 데이터가 삭제됨 (앱 재설치)

**테스트 단계**:
1. 앱 실행
2. 회원가입 화면으로 이동
3. 사용자 정보 입력:
   - 이름: "테스트 사용자"
   - 이메일: "test@example.com"
   - 비밀번호: "Test1234!"
   - 비밀번호 확인: "Test1234!"
4. 이용약관 체크박스 선택
5. "회원가입" 버튼 클릭
6. 로그인 화면으로 자동 전환 확인
7. 생성한 계정으로 로그인
8. 홈 화면 진입 확인

**예상 결과**:
- ✅ 회원가입 성공 Toast 메시지 표시
- ✅ 로그인 화면으로 자동 전환
- ✅ 로그인 후 홈 화면(평가 화면) 표시
- ✅ 무료 플랜 자동 할당 (3회 평가 가능)

**검증 항목**:
- [ ] 모든 입력 필드가 올바르게 작동하는가?
- [ ] 폼 검증이 제대로 동작하는가? (이메일 형식, 비밀번호 길이 등)
- [ ] 에러 메시지가 적절히 표시되는가?
- [ ] 회원가입 후 자동으로 로그인되지 않는가? (보안 정책)
- [ ] Toast 메시지가 명확하게 표시되는가?

---

### 시나리오 2: 로그인 및 로그아웃 플로우

**목적**: 기존 사용자 인증 및 세션 관리 검증

**전제 조건**:
- 계정이 이미 생성되어 있음 (test@example.com / Test1234!)

**테스트 단계**:
1. 로그인 화면에서 이메일/비밀번호 입력
2. "로그인" 버튼 클릭
3. 홈 화면 진입 확인
4. 설정 화면으로 이동
5. "로그아웃" 버튼 클릭
6. 확인 다이얼로그에서 "확인" 선택
7. 로그인 화면으로 돌아가는지 확인

**예상 결과**:
- ✅ 로그인 성공 후 홈 화면 표시
- ✅ 사용자 정보가 헤더/설정에 표시됨
- ✅ 로그아웃 후 로그인 화면으로 전환
- ✅ 저장된 토큰이 삭제됨

**검증 항목**:
- [ ] 잘못된 비밀번호 입력 시 에러 메시지 표시되는가?
- [ ] 로그인 후 사용자 이름이 표시되는가?
- [ ] 로그아웃 확인 다이얼로그가 표시되는가?
- [ ] 로그아웃 후 뒤로가기 버튼으로 홈 화면 접근 불가능한가?
- [ ] 앱 재시작 시 로그아웃 상태 유지되는가?

---

### 시나리오 3: 건강 검사 평가 플로우 (성공 케이스)

**목적**: 건강 검사 폼 작성부터 결과 확인까지 전체 플로우 검증

**전제 조건**:
- 사용자가 로그인되어 있음
- 무료 플랜 (3회 평가 남음)

**테스트 단계**:

**Step 1: 기본 정보 입력**
1. 홈 화면에서 평가 폼 확인
2. 나이 입력: 45
3. 성별 선택: 남성
4. "다음" 버튼 클릭

**Step 2: 건강 지표 입력**
5. 휴식기 혈압: 120
6. 콜레스테롤: 200
7. 공복 혈당: 100
8. 최대 심박수: 150
9. "다음" 버튼 클릭

**Step 3: 증상 입력**
10. 가슴 통증 유형: 없음 (0)
11. 휴식 심전도: 정상 (0)
12. 운동 유발 협심증: 아니오
13. ST 하강: 1.0
14. ST 경사: 평탄 (1)
15. "분석" 버튼 클릭

**Step 4: 결과 확인**
16. 분석 중 로딩 인디케이터 확인
17. 결과 화면 진입 확인
18. 위험 수준 표시 확인
19. 권장 사항 목록 확인
20. "확인" 버튼으로 홈으로 돌아가기

**예상 결과**:
- ✅ 각 단계별 입력 필드가 정상 작동
- ✅ "다음" 버튼으로 단계 전환
- ✅ 뒤로 가기로 이전 단계 이동 가능
- ✅ 분석 완료 후 결과 화면 표시
- ✅ 위험 수준에 따라 색상 코딩 (빨강/노랑/초록)
- ✅ 권장 사항이 목록으로 표시됨
- ✅ 평가 횟수 1회 차감 (3 → 2)

**검증 항목**:
- [ ] 모든 입력 필드가 숫자 키보드로 정확히 입력되는가?
- [ ] 필수 필드 누락 시 "다음" 버튼 비활성화되는가?
- [ ] 단계 전환 애니메이션이 부드러운가?
- [ ] 결과 화면이 5초 이내에 표시되는가?
- [ ] 위험 수준 색상이 명확하게 구분되는가?
- [ ] 결과가 기록 화면에 저장되는가?

---

### 시나리오 4: 평가 기록 조회

**목적**: 저장된 평가 기록 조회 및 상세 보기 검증

**전제 조건**:
- 사용자가 로그인되어 있음
- 최소 1개 이상의 평가 기록이 있음

**테스트 단계**:
1. 하단 탭에서 "기록" 탭 선택
2. 평가 기록 목록 확인
3. 가장 최근 기록 카드 탭
4. 상세 결과 화면 표시 확인
5. 위험 수준, 날짜, 권장사항 확인
6. 뒤로 가기로 목록으로 돌아가기

**예상 결과**:
- ✅ 평가 기록이 최신순으로 정렬됨
- ✅ 각 카드에 날짜, 위험 수준 표시
- ✅ 카드 탭 시 상세 화면 이동
- ✅ 상세 화면에 완전한 평가 데이터 표시

**검증 항목**:
- [ ] 기록이 날짜 역순으로 정렬되는가?
- [ ] 빈 상태 (기록 없음) UI가 표시되는가?
- [ ] 스크롤이 부드럽게 작동하는가?
- [ ] 카드 탭 시 즉시 응답하는가?
- [ ] 상세 화면에 모든 데이터가 표시되는가?

---

### 시나리오 5: 무료 플랜 제한 및 업그레이드 플로우

**목적**: 무료 플랜 사용 제한 및 프리미엄 업그레이드 검증

**전제 조건**:
- 사용자가 로그인되어 있음
- 무료 플랜 (평가 3회 중 3회 모두 사용)

**테스트 단계**:

**Phase 1: 제한 확인**
1. 홈 화면에서 평가 시도
2. "평가 횟수 초과" Toast 메시지 확인
3. "프리미엄으로 업그레이드" 안내 표시 확인

**Phase 2: 구독 화면**
4. 프리미엄 업그레이드 링크 클릭
5. 구독 플랜 화면 진입
6. Free Plan / Premium Plan 카드 확인
7. Premium Plan 카드의 "인기" 배지 확인
8. Premium Plan 선택

**Phase 3: 결제 화면**
9. 결제 화면 진입
10. 결제 방법 선택 (신용카드)
11. 주문 요약 확인 (9,900원)
12. 약관 동의 체크박스 선택
13. "결제하기" 버튼 클릭

**Phase 4: 결제 완료**
14. 결제 성공 Toast 메시지 확인
15. 결제 내역 화면으로 자동 전환
16. 설정 화면에서 프리미엄 상태 확인

**Phase 5: 무제한 평가**
17. 홈 화면에서 평가 시도
18. 평가 폼 정상 작동 확인
19. 평가 제한 메시지 표시되지 않음 확인

**예상 결과**:
- ✅ 무료 플랜 제한 시 명확한 안내 표시
- ✅ 구독 플랜 비교가 명확함
- ✅ 결제 흐름이 직관적임
- ✅ 결제 완료 후 즉시 프리미엄 적용
- ✅ 프리미엄 사용자는 무제한 평가 가능

**검증 항목**:
- [ ] 무료 플랜 제한 메시지가 명확한가?
- [ ] 구독 플랜 설명이 충분한가?
- [ ] 결제 금액이 정확하게 표시되는가?
- [ ] 결제 완료 후 상태가 즉시 업데이트되는가?
- [ ] 프리미엄 사용자는 제한 없이 평가 가능한가?
- [ ] 결제 내역이 정확하게 저장되는가?

---

### 시나리오 6: 설정 변경 (테마, 언어)

**목적**: 앱 설정 변경 및 유지 검증

**전제 조건**:
- 사용자가 로그인되어 있음

**테스트 단계**:

**언어 변경**
1. 설정 화면 진입
2. "언어 설정" 탭
3. 영어 선택
4. Toast 메시지로 변경 확인
5. 앱 전체 텍스트가 영어로 변경 확인
6. 한국어로 다시 변경

**테마 변경**
7. "테마 설정" 탭
8. 다크 모드 선택
9. 앱 전체 색상이 다크로 변경 확인
10. 라이트 모드로 다시 변경
11. 앱 재시작 후 설정 유지 확인

**예상 결과**:
- ✅ 언어 변경 즉시 반영됨
- ✅ 모든 화면의 텍스트가 선택한 언어로 표시됨
- ✅ 테마 변경 즉시 색상 변경됨
- ✅ 앱 재시작 후에도 설정 유지됨

**검증 항목**:
- [ ] 언어 변경이 모든 화면에 일관되게 적용되는가?
- [ ] 번역되지 않은 텍스트는 없는가?
- [ ] 다크 모드에서 텍스트 가독성이 좋은가?
- [ ] 설정이 앱 재시작 후에도 유지되는가?
- [ ] 설정 변경이 1초 이내에 반영되는가?

---

### 시나리오 7: 관리자 기능 (Admin)

**목적**: 관리자 전용 기능 접근 및 동작 검증

**전제 조건**:
- 관리자 계정으로 로그인 (email에 "admin" 포함)

**테스트 단계**:

**관리자 로그인**
1. 로그아웃 상태에서 시작
2. 관리자 로그인 화면 진입
3. 관리자 이메일 입력: "admin@example.com"
4. 비밀번호 입력
5. 로그인
6. 관리자 대시보드 진입 확인

**대시보드 확인**
7. 6개 통계 카드 확인:
   - 전체 사용자 수
   - 활성 사용자 수
   - 전체 검사 수
   - 프리미엄 사용자 수
   - 총 수익
   - 평균 위험도
8. 사용자 관리 섹션 확인
9. 당겨서 새로고침 동작 확인

**알림 전송**
10. "알림 보내기" 버튼 클릭
11. 알림 작성 화면 진입
12. 제목 입력: "중요 공지"
13. 메시지 입력: "시스템 점검 안내"
14. 수신자 선택: 전체 사용자
15. "지금 보내기" 버튼 클릭
16. 전송 성공 Toast 확인
17. 전송 내역에 추가 확인

**예상 결과**:
- ✅ 일반 사용자는 관리자 화면 접근 불가
- ✅ 관리자 대시보드에 실시간 통계 표시
- ✅ 알림 전송 기능 정상 작동
- ✅ 전송 내역 저장됨

**검증 항목**:
- [ ] 일반 사용자 계정으로 관리자 로그인 시도 시 에러 메시지 표시되는가?
- [ ] 통계 카드 데이터가 정확한가?
- [ ] 새로고침이 부드럽게 작동하는가?
- [ ] 알림 폼 검증이 제대로 작동하는가?
- [ ] 전송 내역이 최신순으로 표시되는가?

---

### 시나리오 8: 네트워크 에러 처리

**목적**: 네트워크 오류 상황에서 적절한 에러 처리 검증

**전제 조건**:
- 앱이 실행 중
- 기기의 인터넷 연결을 끌 수 있음

**테스트 단계**:
1. 로그인 화면에서 시작
2. 기기의 Wi-Fi/모바일 데이터 끄기
3. 로그인 시도
4. 네트워크 에러 Toast 메시지 확인
5. 인터넷 연결 다시 켜기
6. 로그인 재시도
7. 정상 로그인 확인

**예상 결과**:
- ✅ 네트워크 에러 시 명확한 에러 메시지 표시
- ✅ "인터넷 연결을 확인해주세요" 안내
- ✅ 앱 크래시 없음
- ✅ 네트워크 복구 후 정상 작동

**검증 항목**:
- [ ] 모든 API 호출에서 네트워크 에러 처리되는가?
- [ ] 에러 메시지가 사용자 친화적인가?
- [ ] 로딩 인디케이터가 적절히 사라지는가?
- [ ] 재시도 기능이 제공되는가?

---

### 시나리오 9: 데이터 지속성 (앱 재시작)

**목적**: 앱 종료 및 재시작 시 데이터 유지 검증

**전제 조건**:
- 사용자가 로그인되어 있음
- 평가 기록이 있음

**테스트 단계**:
1. 로그인 상태 확인
2. 평가 1회 수행
3. 설정에서 언어를 영어로 변경
4. 앱 완전히 종료 (백그라운드에서 제거)
5. 앱 재시작
6. 로그인 상태 유지 확인
7. 평가 기록 유지 확인
8. 언어 설정 유지 확인 (영어)

**예상 결과**:
- ✅ 로그인 상태 유지됨
- ✅ 평가 기록 모두 유지됨
- ✅ 앱 설정 (언어, 테마) 유지됨
- ✅ 프리미엄 상태 유지됨

**검증 항목**:
- [ ] 토큰이 안전하게 저장되는가?
- [ ] 모든 사용자 데이터가 유지되는가?
- [ ] 설정이 MMKV에 저장되는가?
- [ ] 앱 업데이트 후에도 데이터 유지되는가?

---

## 📊 테스트 체크리스트

### 기능 테스트
- [ ] 시나리오 1: 회원가입 플로우
- [ ] 시나리오 2: 로그인/로그아웃 플로우
- [ ] 시나리오 3: 건강 검사 평가 플로우
- [ ] 시나리오 4: 평가 기록 조회
- [ ] 시나리오 5: 무료 플랜 제한 및 업그레이드
- [ ] 시나리오 6: 설정 변경
- [ ] 시나리오 7: 관리자 기능
- [ ] 시나리오 8: 네트워크 에러 처리
- [ ] 시나리오 9: 데이터 지속성

### 플랫폼별 테스트
- [ ] iOS 시뮬레이터 (모든 시나리오)
- [ ] Android 에뮬레이터 (모든 시나리오)
- [ ] iOS 실제 기기 (주요 시나리오)
- [ ] Android 실제 기기 (주요 시나리오)

### 성능 테스트
- [ ] 앱 시작 시간 < 3초
- [ ] 화면 전환 애니메이션 부드러움
- [ ] API 응답 시간 < 5초
- [ ] 스크롤 성능 (60fps 유지)

### 접근성 테스트
- [ ] VoiceOver (iOS) 동작 확인
- [ ] TalkBack (Android) 동작 확인
- [ ] 폰트 크기 조절 지원
- [ ] 색상 대비 충분함

---

## 🐛 발견된 이슈 보고 형식

**이슈 ID**: #XXX
**시나리오**: [시나리오 번호 및 제목]
**플랫폼**: iOS / Android / 공통
**심각도**: Critical / Major / Minor
**재현 단계**:
1. [단계 1]
2. [단계 2]
3. [단계 3]

**예상 결과**: [무엇이 일어나야 하는가]
**실제 결과**: [실제로 무엇이 일어났는가]
**스크린샷**: [첨부]
**추가 정보**: [기기 정보, OS 버전 등]

---

## 📝 테스트 완료 보고서

**테스트 일자**: [날짜]
**테스터**: [이름]
**플랫폼**: iOS / Android
**기기**: [기기명 및 OS 버전]

**결과 요약**:
- 총 시나리오 수: 9
- 통과: X
- 실패: X
- 미완료: X

**주요 발견 사항**:
- [발견된 이슈 요약]

**권장 사항**:
- [개선 제안]

---

**문서 작성자**: Claude Code
**최종 업데이트**: 2025-10-23
